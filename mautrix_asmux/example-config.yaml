# Homeserver details.
homeserver:
    # The server name of the homeserver.
    domain: example.com
    # Client-server API URL.
    address: http://localhost:8008
    # Shared secret for login with https://github.com/devture/matrix-synapse-shared-secret-auth
    login_shared_secret: null

# Application service registration related details.
# Changing these values requires regeneration of the registration.
appservice:
    # The address that the homeserver can use to connect to this appservice.
    # The listen host/port are defined in the mux section below.
    address: http://localhost:29326

    # The unique ID of this appservice.
    id: asmux
    # Username of the appservice bot. This isn't currently used for anything, but needs to be set.
    bot_username: asmuxbot
    # Display name and avatar for bot. Set to "remove" to remove display name/avatar, leave empty
    # to leave display name/avatar as-is.
    bot_displayname: mautrix-asmux
    bot_avatar:

    # Authentication tokens for asmux <-> HS communication. Autogenerated; do not modify.
    as_token: "This value is generated when generating the registration"
    hs_token: "This value is generated when generating the registration"

    namespace:
        # Prefix used for all username and alias namespaces.
        prefix: _
        # Whether or not the prefix should be exclusively for asmux (and the services behind it).
        exclusive: true

posthog:
    token: null
    host: app.posthog.com

metrics:
    enabled: true
    listen_port: 8000

# Main mautrix-asmux settings
mux:
    # The hostname and port where this appservice should listen.
    # This is both the server where synapse sends AS transactions and the server where bridges
    # should connect to use the client-server API.
    hostname: 0.0.0.0
    port: 29326
    # Database URI. Currently only supports postgres://user:password@host/dbname
    database: postgres:///mautrix-asmux
    # Shared secret for accessing the API
    shared_secret: generate

# Python logging configuration.
#
# See the configuration dictionary schema in the Python documentation for more info:
# https://docs.python.org/3/library/logging.config.html#configuration-dictionary-schema
logging:
    version: 1
    formatters:
        colored:
            (): mautrix.util.color_log.ColorFormatter
            format: "[%(asctime)s] [%(levelname)s@%(name)s] %(message)s"
        normal:
            format: "[%(asctime)s] [%(levelname)s@%(name)s] %(message)s"
    handlers:
        file:
            class: logging.handlers.RotatingFileHandler
            formatter: normal
            filename: ./mautrix-asmux.log
            maxBytes: 10485760
            backupCount: 10
        console:
            class: logging.StreamHandler
            formatter: colored
    loggers:
        mau:
            level: DEBUG
        aiohttp:
            level: INFO
    root:
        level: DEBUG
        handlers: [file, console]
